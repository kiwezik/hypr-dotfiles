# Вы можете разделить этот конфиг на разные файлы
# Создайте файлы отдельно и импортируйте их сюда так:
# source = ~/.config/hypr/myColors.conf


################
### Мониторы ###
################

# О настройке мониторов https://wiki.hyprland.org/Configuring/Monitors/
monitor=,preferred,auto,auto


##################
##     apps     ##
##################
$terminal = kitty
$fileManager = nemo
$menu = rofi -show drun
$player = tauon
$browser = firefox
$mixer = pavucontrol
####################
###  Автозапуск  ###
####################

exec-once = waybar -c /etc/xdg/waybar/bottom.jsonc
exec-once = waybar -c /etc/xdg/waybar/top.jsonc  
exec-once = pactl set-source-mute @DEFAULT_SOURCE@ 1
exec-once = swww restore
exec-once = rm "$HOME/.cache/cliphist/db"
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = swww-daemon

##############################
###  Переменные окружения  ###
##############################

# https://wiki.hyprland.org/Configuring/Environment-variables/
env = WLR_NO_HARDWARE_CURSORS,1
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24
env = XDG_SESSION_TYPE,wayland
env = XCURSOR_THEME,breeze
env = __GL_MaxFramesAllowed,1


#####################
###  Внешний вид  ###
#####################

# https://wiki.hyprland.org/Configuring/Variables/
# https://wiki.hyprland.org/Configuring/Variables/#general

general {
    gaps_in = 3
    gaps_out = 7

    border_size = 2

    # Инфа о цветах - https://wiki.hyprland.org/Configuring/Variables/#variable-types
    col.active_border = rgba(ffffffee)
    col.inactive_border = rgba(595959aa)

    # Позволяет МЫШКОЙ резайзить окна, "хватая" пространство между ними
    resize_on_border = true

    # Хз что это, лучше не трогать))) или читать это и потом трогать - https://wiki.hyprland.org/Configuring/Tearing/ 
    allow_tearing = false

    layout = dwindle
}

# https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    rounding = 9                # Скругления углов окон 
    # Смена прозрачности активных и инактивных окон
    active_opacity = 1          # Активные
    inactive_opacity = 0.925    # Инактивные
    shadow {
        enabled = true # Тени на границах окон
        range = 4
        render_power = 3
        color = rgba(1a1a1aee) 
    }

    # Блюр https://wiki.hyprland.org/Configuring/Variables/#blur
    blur {
        enabled = true    # Блюр под окнами. Видно только если само окно прозрачное, например, терминал с прозрачным задним фоном
        size = 3          # Настраивать силу блюра
        passes = 3        # Настраивать силу блюра
        layerrule = blur,waybar
        layerrule = blur,rofi

    }
}


# Анимации https://wiki.hyprland.org/Configuring/Variables/#animations
animations {
    enabled = true

    # Стандартные анимации https://wiki.hyprland.org/Configuring/Animations/

    bezier = easeOutQuint,0.23,1,0.32,1
    bezier = easeInOutCubic,0.65,0.05,0.36,1
    bezier = linear,0,0,1,1
    bezier = almostLinear,0.5,0.5,0.75,1.0
    bezier = quick,0.15,0,0.1,1

    animation = global, 1, 10, default
    animation = border, 1, 5.39, easeOutQuint
    animation = windows, 1, 4.79, easeOutQuint
    animation = windowsIn, 1, 4.1, easeOutQuint, popin 87%
    animation = windowsOut, 1, 1.49, linear, popin 87%
    animation = fadeIn, 1, 1.73, almostLinear
    animation = fadeOut, 1, 1.46, almostLinear
    animation = fade, 1, 3.03, quick
    animation = layers, 1, 3.81, easeOutQuint
    animation = layersIn, 1, 4, easeOutQuint, fade
    animation = layersOut, 1, 1.5, linear, fade
    animation = fadeLayersIn, 1, 1.79, almostLinear
    animation = fadeLayersOut, 1, 1.39, almostLinear
    animation = workspaces, 1, 1.94, almostLinear, fade
    animation = workspacesIn, 1, 1.21, almostLinear, fade
    animation = workspacesOut, 1, 1.94, almostLinear, fade
}

dwindle {
    pseudotile = true # Master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = true # You probably want this
}

master {
    new_status = master
}

# Всякое, другое и разное - https://wiki.hyprland.org/Configuring/Variables/#misc
misc {
    force_default_wallpaper = -1 # Set to 0 or 1 to disable the anime mascot wallpapers
    disable_hyprland_logo = false # If true disables the random hyprland logo / anime girl background. :(
    middle_click_paste = false # Отключает вставку (Ctrl + V) на нажатие колёсика
    disable_splash_rendering = true # Убирает цитаты и тд снизу обоев
}
# Настройки устройств ввода, документация - https://wiki.hyprland.org/Configuring/Variables/#input
# Настройки клавиатуры
input {
    kb_layout = us,ru # Американская (английская) и русская раскладки
    kb_options = grp:lalt_lshift_toggle # Переключение раскладки (все варианты сочетаний можно посмотреть командой grep "grp:.*toggle" /usr/share/X11/xkb/rules/base.lst)
# Мышь
    accel_profile = flat
    follow_mouse = 1
    sensitivity = 0.3 # -1.0 - 1.0, 0 means no modification.
}

# Пример настроек для каждого девайса, документация - https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs
device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

# Бинды. Документация - https://wiki.hyprland.org/Configuring/Binds/
# Названия доступных клавиш - https://wiki.hyprland.org/Configuring/Keywords/
$mainMod = SUPER						     # Клавиша Windows/Super/Meta как главный модификатор
bind = $mainMod, L, exec, hyprlock -c ~/Dotfiles/hyprland/hyprlock.conf
bind = $mainMod, V, exec, pkill rofi || cliphist list | rofi -dmenu | cliphist decode | wl-copy
bind = $mainMod, W, exec, AmneziaVPN
bind = , XF86Launch5, exec, killall paplay ; paplay ~/Dotfiles/assets/A.wav
bind = , XF86Launch6, exec, pkill  
bind = $mainMod, P, exec, $mixer				     # Управление звуком через pavucontrol
bind = $mainMod, G, exec, steam
bind = $mainMod, bracketleft, exec, pkill rofi || sh ~/Dotfiles/swww/rofi-wallpaper-launcher.sh
bind = $mainMod, bracketright, exec, sh ~/Dotfiles/swww/random-wallpaper.sh
bind = $mainMod, Q, exec, $terminal				     # Терминал / kitty
bind = $mainMod, D, killactive					     # Закрытие текущего окна
bind = alt, F4, killactive
bind = $mainMod, M, exit					     # Выход из hyprland, возвращение в SDDM
bind = $mainMod, C, togglefloating				     # Свободное перемещение окна и ресайз без тайлинговых приколов на Super + ПКМ / Super + ЛКМ соответственно
bind = $mainMod, Z, togglesplit
bind = $mainMod, F, fullscreen
bind = $mainMod + shift, S, exec, grim -g "$(slurp)" - | wl-copy && wl-paste > ~/Pictures/Screenshots/Screenshot-$(date +%F_%T).png ; killall paplay ; paplay ~/Dotfiles/assets/A.wav
bind = $mainMod + shift, F, exec, grim - | wl-copy && wl-paste > ~/Pictures/Screenshots/Screenshot-$(date +%F_%T).png ; killall paplay ; paplay ~/Dotfiles/assets/A.wav
bind = $mainMod, space, exec, pkill rofi || rofi -show drun
bind = $mainMod + shift, N, exec, code ~/Dotfiles/hyprland/hyprland.conf
bind = $mainMod + shift, M, exec, code ~/Dotfiles/waybar/style.css
bind = $mainMod + shift, B, exec, code ~/Dotfiles/waybar/bottom.jsonc
bind = $mainMod + shift, V, exec, code ~/Dotfiles/waybar/top.jsonc
bind = $mainMod + shift, K, exec, killall waybar ; waybar -c /etc/xdg/waybar/top.jsonc & waybar -c /etc/xdg/waybar/bottom.jsonc 
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, T, exec, $player
bind = $mainMod, A, exec, $browser
# Воркспейсы
binde = $mainMod, left, movefocus, l				     # Фокус на окно левее
binde = $mainMod, right, movefocus, r                                 # Фокус на окно правее
binde = $mainMod, up, movefocus, u                                    # Фокус на окно выше
binde = $mainMod, down, movefocus, d                                  # Фокус на окно ниже
bind = $mainMod, R, workspace, 1
bind = $mainMod SHIFT, R, movetoworkspacesilent, 1
bind = $mainMod, X, workspace, 2
bind = $mainMod SHIFT, X, movetoworkspacesilent, 2
bind = $mainMod, mouse:276, workspace, 3
bind = $mainMod SHIFT, mouse:276, movetoworkspacesilent, 3
bind = $mainMod, mouse:275, workspace, 4
bind = $mainMod SHIFT, mouse:275, movetoworkspacesilent, 4
bindm = $mainMod, mouse:272, movewindow				     # Двигать окно (Super + ПКМ)
bindm = $mainMod, mouse:273, resizewindow			     # Ресайз окна (Super +  ЛКМ)

# Звук (ТОЛЬКО pulseaudio, закомментировать если используется pipewire!!!)
bindel = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -5% ; killall paplay ; paplay ~/Dotfiles/assets/A.wav
bindel = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +5% ; pactl set-sink-mute @DEFAULT_SINK@ 0 ; killall paplay ; paplay ~/Dotfiles/assets/A.wav
bindel = shift, XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -1%
bindel = shift, XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +1%
bindel = , XF86AudioMute, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle
bindel = $mainMod, XF86AudioMute, exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle 
bindel = $mainMod, XF86AudioLowerVolume, exec, pactl set-source-volume @DEFAULT_SOURCE@ -5%
bindel = $mainMod, XF86AudioRaiseVolume, exec, pactl set-source-volume @DEFAULT_SOURCE@ +5%
bindel = $mainMod + shift, XF86AudioLowerVolume, exec, pactl set-source-volume @DEFAULT_SOURCE@ -1%	
bindel = $mainMod + shift, XF86AudioRaiseVolume, exec, pactl set-source-volume @DEFAULT_SOURCE@ +1%	
bindel = $mainMod + alt, XF86AudioLowerVolume, exec, pactl set-source-volume @DEFAULT_SOURCE@ -100%	
bindel = $mainMod + alt, XF86AudioRaiseVolume, exec, pactl set-source-volume @DEFAULT_SOURCE@ +100%	

# Мультимедиа (работает и с PA и с PW)
binde = , XF86AudioNext, exec, playerctl next
binde = , XF86AudioPrev, exec, playerctl previous
binde = , XF86AudioPause, exec, playerctl play-pause
binde = , XF86AudioPlay, exec, playerctl play-pause

# Правила окон и воркспейсов
# Окна - https://wiki.hyprland.org/Configuring/Window-Rules/ 
# Воркспейсы - https://wiki.hyprland.org/Configuring/Workspace-Rules/

# "Пример правил окна v1" (Перевод)
# windowrule = float, ^(kitty)$

# "Пример правил окна v2" (Перевод)
# windowrulev2 = float,class:^(kitty)$,title:^(kitty)$

# "Игнорировать, если приложение хочет свернуться (например, соответствующая кнопка в Steam или Firefox)." (Перевод)
windowrulev2 = suppressevent maximize, class:.*
# "Фикс проблем с перетаскиванием окон в XWayland" (Перевод)
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
# Чтобы waypaper открывался посередине
windowrulev2 = float, title:^Waypaper$
windowrulev2 = monitor DP-1, title:^Waypaper$
windowrulev2 = center, title:^Waypaper$
